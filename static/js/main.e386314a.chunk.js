(this["webpackJsonpsonic-zoom"]=this["webpackJsonpsonic-zoom"]||[]).push([[0],{12:function(o,e,n){},14:function(o,e,n){},15:function(o,e,n){"use strict";n.r(e);var t=n(0),i=n.n(t),a=n(4),c=n.n(a),s=(n(12),n(1)),r=n(2),l=n.n(r),u=n(5),d=n(6),w=n.n(d);var m=function(o){var e=o.setOsdInstance,n=o.ordinal,a=o.audioEl,c=o.osdInstance,s=o.init,r={scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!1,pinchToZoom:!1,pinchRotate:!1,flickEnabled:!1};return Object(t.useEffect)((function(){window.osd=w()({id:"viewer",showZoomControl:!1,showFullPageControl:!1,showNavigationControl:!1,showSequenceControl:!1,showRotationControl:!1,gestureSettingsMouse:r,gestureSettingsTouch:r,gestureSettingsPen:r,gestureSettingsUnknown:r,panHorizontal:!1,panVertical:!1,tileSources:["".concat(window.location.origin,"/sonic-zoom/assets/images/0.json"),"".concat(window.location.origin,"/sonic-zoom/assets/images/1.json"),"".concat(window.location.origin,"/sonic-zoom/assets/images/2.json")]}),window.osd.addHandler("open",(function(){console.log("event: open"),window.osd.viewport.zoomTo(window.osd.viewport.getMaxZoom(),void 0,!0)})),window.osd.addHandler("page",(function(){console.log("event: page"),window.osd.viewport.zoomTo(window.osd.viewport.getMaxZoom(),void 0,!0),s&&console.log("go")})),e(window.osd)}),[]),o.init&&(window.osd.viewport.zoomSpring.animationTime=a.duration+10,window.osd.viewport.goHome()),Object(t.useEffect)((function(){c&&c.viewport&&(console.log("ordinal updated: change image to "+n),c.goToPage(n),c.viewport.goHome())}),[c,n,a]),Object(t.useEffect)((function(){function o(){return(o=Object(u.a)(l.a.mark((function o(){return l.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!a||!s){o.next=5;break}return a.pause(),a.src="".concat(window.location.origin,"/sonic-zoom/assets/audio/").concat(n,".mp3"),o.next=5,a.play();case 5:case"end":return o.stop()}}),o)})))).apply(this,arguments)}!function(){o.apply(this,arguments)}()}),[s,n,a]),i.a.createElement("div",{id:"viewer"})};var f=function(o){var e=Object(t.useRef)(null),n=o.setAudioEl,a=o.setOrdinal,c=o.ordinal,s=o.audioEl,r=o.totalTracks;return Object(t.useEffect)((function(){n(e.current)}),[n]),Object(t.useEffect)((function(){s&&(s.onended=function(){a(c<r-1?c+1:0)})}),[r,s,c,a]),i.a.createElement("audio",{ref:e,id:"player"},i.a.createElement("source",{src:"".concat(window.location.origin,"/sonic-zoom/assets/audio/").concat(o.ordinal,".mp3"),type:"audio/mp3"}))};var p=function(o){var e=function(e){o.setInit(!0),e.preventDefault()};return Object(t.useEffect)((function(){}),[]),i.a.createElement("div",null,o.init?null:i.a.createElement("button",{className:"initButton",onClick:e},"Start"))};n(14);var g=function(){var o=Object(t.useState)(0),e=Object(s.a)(o,2),n=e[0],a=e[1],c=Object(t.useState)(null),r=Object(s.a)(c,2),l=r[0],u=r[1],d=Object(t.useState)({}),w=Object(s.a)(d,2),g=w[0],v=w[1],E=Object(t.useState)(!1),b=Object(s.a)(E,2),h=b[0],O=b[1];return i.a.createElement("div",null,i.a.createElement(p,{init:h,setInit:O}),i.a.createElement(m,{init:h,ordinal:n,audioEl:l,osdInstance:g,setOsdInstance:v,totalTrack:3}),i.a.createElement(f,{ordinal:n,audioEl:l,setOrdinal:a,setAudioEl:u,totalTracks:3}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(o){o.unregister()}))},7:function(o,e,n){o.exports=n(15)}},[[7,1,2]]]);
//# sourceMappingURL=main.e386314a.chunk.js.map